(()=>{var e={};e.id=73,e.ids=[73],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},8188:e=>{"use strict";e.exports=require("module")},7310:e=>{"use strict";e.exports=require("url")},9489:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>g,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=a(7096),s=a(6132),l=a(7284),n=a.n(l),i=a(2564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d=["",{children:["customize",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,5438)),"C:\\Users\\prana\\CascadeProjects\\template-creator\\app\\customize\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,5345)),"C:\\Users\\prana\\CascadeProjects\\template-creator\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\prana\\CascadeProjects\\template-creator\\app\\customize\\[id]\\page.tsx"],g="/customize/[id]/page",h={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/customize/[id]/page",pathname:"/customize/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},558:(e,t,a)=>{Promise.resolve().then(a.bind(a,5938))},5938:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>CustomizePage});var r=a(784),s=a(9885),l=a(7114),n=a(9803),i=a(9546),o=a(5574),d=a(1910),c=a(1922),g=a(1440),h=a.n(g),m=a(9396),u=a(8335);function CustomizePage(){let e=(0,l.useParams)(),[t,a]=(0,s.useState)(null),[g,p]=(0,s.useState)({}),[x,f]=(0,s.useState)(!0),[b,y]=(0,s.useState)(!1),[w,P]=(0,s.useState)(0),[j,v]=(0,s.useState)([]),[N,C]=(0,s.useState)(null),[F,k]=(0,s.useState)(null),[$,D]=(0,s.useState)(!1),[E,T]=(0,s.useState)(null),L=(0,s.useRef)(null);(0,s.useEffect)(()=>{let loadPdfLibraries=async()=>{try{let e=document.createElement("script");e.src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js",e.onload=()=>{k(window.PDFLib)},document.head.appendChild(e);let t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",t.onload=()=>{window.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js"},document.head.appendChild(t)}catch(e){console.error("Error loading PDF libraries:",e)}};loadPdfLibraries()},[]),(0,s.useEffect)(()=>{e.id&&fetchTemplate(e.id)},[e.id]),(0,s.useEffect)(()=>{let handleKeyDown=e=>{t?.isPdf&&("ArrowLeft"===e.key||"ArrowUp"===e.key?(e.preventDefault(),navigateToPage("prev")):("ArrowRight"===e.key||"ArrowDown"===e.key)&&(e.preventDefault(),navigateToPage("next")))};return window.addEventListener("keydown",handleKeyDown),()=>window.removeEventListener("keydown",handleKeyDown)},[t,w]);let fetchTemplate=async e=>{try{f(!0);let t=await fetch(`/api/templates/${e}`);if(t.ok){let e=await t.json();a(e);let r={};e.placeholders.forEach(e=>{r[e.id]=""}),p(r),e.isPdf&&e.pdfFilePath?await loadPdfTemplate(e.pdfFilePath):e.isPdf&&!e.pdfFilePath&&(console.warn("PDF template detected but no pdfFilePath provided"),T("PDF file path not found in template data"))}else throw Error("Template not found")}catch(e){console.error("Error fetching template:",e)}finally{f(!1)}},loadPdfTemplate=async e=>{if(!F){console.warn("PDF-lib not loaded yet, retrying..."),setTimeout(()=>loadPdfTemplate(e),1e3);return}try{D(!0),T(null),console.log("Loading PDF from:",e);let r=await fetch(e,{mode:"cors",headers:{Accept:"application/pdf"}});if(!r.ok)throw Error(`Failed to fetch PDF: ${r.status} ${r.statusText}`);let s=await r.arrayBuffer();console.log("PDF loaded, size:",s.byteLength);let l=await F.PDFDocument.load(s),n=l.getPageCount();console.log("PDF pages detected:",n),C(l),t&&(!t.totalPages||t.totalPages!==n)&&a(e=>e?{...e,totalPages:n}:null);let i=[];for(let e=0;e<n;e++)try{console.log(`Rendering page ${e+1}/${n}`);let t=await renderPdfPage(l,e);t?(i.push(t),console.log(`Page ${e+1} rendered successfully`)):(console.warn(`Page ${e+1} failed to render`),i.push(""))}catch(t){console.error(`Error rendering page ${e+1}:`,t),i.push("")}console.log("Total pages rendered:",i.filter(e=>e).length),v(i),P(0),D(!1)}catch(e){console.error("Error loading PDF template:",e),T(`Failed to load PDF template: ${e instanceof Error?e.message:"Unknown error"}`),D(!1)}},renderPdfPage=async(e,t)=>{if(!F||!e)return"";try{if(window.pdfjsLib||(console.warn("PDF.js not loaded, waiting..."),await new Promise(e=>setTimeout(e,1e3))),window.pdfjsLib){let a=await e.save(),r=window.pdfjsLib.getDocument({data:a,cMapUrl:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/cmaps/",cMapPacked:!0}),s=await r.promise,l=await s.getPage(t+1),n=Math.min(2,800/l.getViewport({scale:1}).width),i=l.getViewport({scale:n}),o=document.createElement("canvas"),d=o.getContext("2d");if(!d)throw Error("Canvas context not available");return o.height=i.height,o.width=i.width,await l.render({canvasContext:d,viewport:i,enableWebGL:!1}).promise,s.destroy(),o.toDataURL("image/png",.9)}{console.warn("PDF.js not available, using fallback");let a=await F.PDFDocument.create(),[r]=await a.copyPages(e,[t]);a.addPage(r);let s=await a.save(),l=new Blob([s],{type:"application/pdf"});return URL.createObjectURL(l)}}catch(e){return console.error("Error rendering PDF page:",e),""}},handleInputChange=(e,t)=>{p(a=>({...a,[e]:t}))},handleImageUpload=(e,t)=>{p(a=>({...a,[e]:t}))},navigateToPage=e=>{if(!t||!t.isPdf)return;let a=t.totalPages||j.length||1;"prev"===e&&w>0?P(w-1):"next"===e&&w<a-1&&P(w+1)},goToPage=e=>{if(!t||!t.isPdf)return;let a=t.totalPages||j.length||1;P(Math.max(0,Math.min(e-1,a-1)))},generatePDF=async()=>{if(t){y(!0);try{t.isPdf&&N?await generatePdfFromTemplate():await generatePdfFromCanvas()}catch(e){console.error("Error generating PDF:",e),alert("Error generating PDF. Please try again.")}finally{y(!1)}}},generatePdfFromTemplate=async()=>{if(F&&N&&t)try{let e=await F.PDFDocument.create(),a=await e.copyPages(N,Array.from({length:N.getPageCount()},(e,t)=>t));a.forEach(t=>e.addPage(t));let r=await e.embedFont(F.StandardFonts.Helvetica),s=await e.embedFont(F.StandardFonts.TimesRoman),l={Arial:r,Helvetica:r,"Times New Roman":s,Georgia:s},n=e.getPages();for(let a=0;a<n.length;a++){let s=n[a],{height:i}=s.getSize(),o=t.placeholders.filter(e=>e.pageIndex===a);for(let n of o){let i=g[n.id];if(!i&&n.required){alert(`Required field "${n.placeholder}" is missing on page ${a+1}`);return}if(i){if("text"===n.type){let e=l[n.fontFamily||"Arial"]||r,a=n.fontSize||12,o=hexToRgb(n.color||"#000000"),d=s.getSize(),c=d.width,g=d.height;console.log(`[CLIENT DEBUG] Text Placeholder ${n.id}:`),console.log(`  Template dimensions: ${t.width}x${t.height}`),console.log(`  Actual PDF dimensions: ${c}x${g}`),console.log(`  Original position: x=${n.x}, y=${n.y}`),console.log(`  Original size: w=${n.width}, h=${n.height}`);let h=n.x,m=g-n.y-n.height;console.log(`  Calculated position: x=${h}, y=${m}`),console.log(`  Font size: ${a}`),s.drawText(i.toString(),{x:h,y:m,size:a,font:e,color:F.rgb(o.r/255,o.g/255,o.b/255),maxWidth:n.width})}else if("image"===n.type&&i instanceof File)try{let a;let r=await i.arrayBuffer();if("image/png"===i.type)a=await e.embedPng(r);else if("image/jpeg"===i.type||"image/jpg"===i.type)a=await e.embedJpg(r);else{console.warn(`Unsupported image type: ${i.type}`);continue}let l=s.getSize(),o=l.width,d=l.height;console.log(`[CLIENT DEBUG] Image Placeholder ${n.id}:`),console.log(`  Template dimensions: ${t.width}x${t.height}`),console.log(`  Actual PDF dimensions: ${o}x${d}`),console.log(`  Original position: x=${n.x}, y=${n.y}`),console.log(`  Original size: w=${n.width}, h=${n.height}`);let c=n.x,g=d-n.y-n.height;console.log(`  Calculated position: x=${c}, y=${g}`),console.log(`  Using original size: w=${n.width}, h=${n.height}`),s.drawImage(a,{x:c,y:g,width:n.width,height:n.height})}catch(e){console.error("Error processing image:",e)}}}}let i=await e.save(),o=new Blob([i],{type:"application/pdf"}),d=URL.createObjectURL(o),c=document.createElement("a");c.href=d,c.download=`${t.name}-customized.pdf`,c.click(),URL.revokeObjectURL(d)}catch(e){throw console.error("Error generating PDF from template:",e),e}},generatePdfFromCanvas=async()=>{if(!L.current||!t)return;let e=L.current.querySelectorAll('[data-placeholder-border="true"]');e.forEach(e=>{e.style.border="none",e.style.backgroundColor="transparent"});let a=await (0,m.Z)(L.current,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});e.forEach(e=>{e.style.border="2px dashed #60a5fa",e.style.backgroundColor="rgba(219, 234, 254, 0.3)"});let r=a.toDataURL("image/png"),s=new u.ZP({orientation:t.width>t.height?"landscape":"portrait",unit:"px",format:[t.width,t.height]});s.addImage(r,"PNG",0,0,t.width,t.height),s.save(`${t.name}-customized.pdf`)},downloadImage=async()=>{if(L.current){y(!0);try{let e=L.current.querySelectorAll('[data-placeholder-border="true"]');e.forEach(e=>{e.style.border="none",e.style.backgroundColor="transparent"});let a=await (0,m.Z)(L.current,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});e.forEach(e=>{e.style.border="2px dashed #60a5fa",e.style.backgroundColor="rgba(219, 234, 254, 0.3)"});let r=document.createElement("a");r.download=`${t?.name}-customized.png`,r.href=a.toDataURL(),r.click()}catch(e){console.error("Error generating image:",e),alert("Error generating image. Please try again.")}finally{y(!1)}}},hexToRgb=e=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}},getCurrentPagePlaceholders=()=>t?t.isPdf?t.placeholders.filter(e=>e.pageIndex===w):t.placeholders:[],getCurrentBackgroundImage=()=>t?.isPdf&&j[w]?j[w]:t?.backgroundImage||"";return x?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading template..."})]})}):t?r.jsx("div",{className:"min-h-screen bg-gray-50 text-black",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(h(),{href:"/",className:"mr-4 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full",children:r.jsx(n.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mr-3",children:t.name}),t.isPdf&&(0,r.jsxs)("div",{className:"flex items-center bg-blue-50 px-2 py-1 rounded-md",children:[r.jsx(i.Z,{className:"w-4 h-4 text-blue-600 mr-1"}),r.jsx("span",{className:"text-sm text-blue-600",children:"PDF Template"})]})]}),r.jsx("p",{className:"text-gray-600",children:t.description}),t.isPdf&&(0,r.jsxs)("p",{className:"text-sm text-blue-600 mt-1",children:[Math.max(t.totalPages||0,j.length)," pages â€¢ Current: Page ",w+1]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[!t.isPdf&&(0,r.jsxs)("button",{onClick:downloadImage,disabled:b,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50",children:[r.jsx(o.Z,{className:"w-4 h-4 mr-2"}),b?"Generating...":"Download PNG"]}),(0,r.jsxs)("button",{onClick:generatePDF,disabled:b,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors flex items-center disabled:opacity-50",children:[r.jsx(o.Z,{className:"w-4 h-4 mr-2"}),b?"Generating...":"Download PDF"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Customize Your Template"}),t.isPdf&&(j.length>1||t.totalPages&&t.totalPages>1)&&r.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Navigate Pages"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>navigateToPage("prev"),disabled:0===w,className:"p-2 rounded bg-white border hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous Page",children:r.jsx(d.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("span",{className:"text-sm text-gray-600 px-2",children:["Page ",w+1," of ",Math.max(t.totalPages||0,j.length)]}),r.jsx("button",{onClick:()=>navigateToPage("next"),disabled:w>=Math.max(t.totalPages||0,j.length)-1,className:"p-2 rounded bg-white border hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next Page",children:r.jsx(c.Z,{className:"w-5 h-5"})})]})]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-md font-medium text-gray-800",children:t.isPdf?`Page ${w+1} Fields`:"Template Fields"}),getCurrentPagePlaceholders().map(e=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.placeholder||`${e.type} field`,e.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"}),t.isPdf&&(0,r.jsxs)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-1 rounded",children:["Page ",(e.pageIndex||0)+1]})]}),"text"===e.type?r.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:e.placeholder,value:g[e.id]||"",onChange:t=>handleInputChange(e.id,t.target.value)}):(0,r.jsxs)("div",{children:[r.jsx("input",{type:"file",accept:"image/*",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",onChange:t=>handleImageUpload(e.id,t.target.files?.[0]||null)}),g[e.id]&&g[e.id]instanceof File&&(0,r.jsxs)("p",{className:"mt-1 text-sm text-green-600",children:["Selected: ",g[e.id].name]})]})]},e.id)),0===getCurrentPagePlaceholders().length&&r.jsx("p",{className:"text-gray-500 text-sm italic",children:"No fields on this page"})]})]}),t.isPdf&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"All Template Fields"}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.placeholders.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm p-2 bg-gray-50 rounded",children:[r.jsx("span",{className:"font-medium",children:e.placeholder||`${e.type} field`}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-600 px-1 rounded",children:["P",(e.pageIndex||0)+1]}),r.jsx("span",{className:`w-2 h-2 rounded-full ${g[e.id]?"bg-green-500":"bg-gray-300"}`})]})]},e.id))})]})]}),r.jsx("div",{className:"lg:col-span-2",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Preview"}),t.isPdf&&(j.length>1||t.totalPages&&t.totalPages>1)&&(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:()=>navigateToPage("prev"),disabled:0===w,className:"p-2 rounded-md bg-blue-100 hover:bg-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous Page",children:r.jsx(d.Z,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"number",min:"1",max:Math.max(t.totalPages||0,j.length),value:w+1,onChange:e=>goToPage(parseInt(e.target.value)||1),className:"w-16 px-2 py-1 text-sm border border-gray-300 rounded text-center focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["of ",Math.max(t.totalPages||0,j.length)]})]}),r.jsx("button",{onClick:()=>navigateToPage("next"),disabled:w>=Math.max(t.totalPages||0,j.length)-1,className:"p-2 rounded-md bg-blue-100 hover:bg-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next Page",children:r.jsx(c.Z,{className:"w-5 h-5 text-blue-600"})})]})]}),r.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white",children:r.jsx("div",{className:"flex justify-center items-center min-h-[400px] p-4",children:r.jsx("div",{ref:L,className:"relative shadow-lg",style:{width:t.isPdf?"fit-content":Math.min(t.width||800,800),height:t.isPdf?"fit-content":Math.min(t.height||600,600),maxWidth:"100%",maxHeight:"80vh",backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px"},children:$?r.jsx("div",{className:"w-full h-96 flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading PDF pages..."})]})}):E?r.jsx("div",{className:"w-full h-96 flex items-center justify-center bg-red-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-red-600 mb-4",children:E}),r.jsx("button",{onClick:()=>t?.pdfFilePath&&loadPdfTemplate(t.pdfFilePath),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]})}):getCurrentBackgroundImage()?(0,r.jsxs)(r.Fragment,{children:[t.isPdf?getCurrentBackgroundImage()?r.jsx("img",{src:getCurrentBackgroundImage(),alt:`PDF page ${w+1}`,className:"w-full h-auto object-contain",crossOrigin:"anonymous",onError:e=>{console.error("Error loading PDF page:",e),T(`Failed to load page ${w+1}`)},onLoad:()=>console.log(`PDF page ${w+1} loaded successfully`),style:{display:"block",maxWidth:"100%",maxHeight:"70vh",height:"auto",width:"auto"}}):r.jsx("div",{className:"w-full h-96 flex items-center justify-center bg-gray-100",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"text-gray-600 mb-2",children:["Page ",w+1," failed to render"]}),r.jsx("button",{onClick:()=>t?.pdfFilePath&&loadPdfTemplate(t.pdfFilePath),className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Retry"})]})}):r.jsx("img",{src:getCurrentBackgroundImage(),alt:"Template background",className:"w-full h-full object-contain",crossOrigin:"anonymous",onError:e=>console.error("Error loading image:",e),style:{maxWidth:"100%",maxHeight:"70vh",height:"auto"}}),getCurrentPagePlaceholders().map(e=>{let a=g[e.id],s=L.current?.querySelector("img"),l=e.x,n=e.y,i=e.width,o=e.height;if(s){let a=s.getBoundingClientRect(),r=L.current?.getBoundingClientRect();if(r&&t.width&&t.height){let r=a.width/t.width,s=a.height/t.height;l=e.x*r,n=e.y*s,i=e.width*r,o=e.height*s}}return r.jsx("div",{className:"absolute flex items-center justify-center print:border-none print:bg-transparent",style:{left:l,top:n,width:i,height:o,pointerEvents:"none",border:"2px dashed #60a5fa",backgroundColor:"rgba(219, 234, 254, 0.3)"},"data-placeholder-border":"true",children:"text"===e.type?r.jsx("div",{className:"w-full h-full flex items-center justify-center text-center break-words overflow-hidden",style:{fontSize:e.fontSize||16,fontFamily:e.fontFamily||"Arial",color:e.color||"#000000",lineHeight:"1.2",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",wordWrap:"break-word",hyphens:"auto"},children:r.jsx("span",{style:{display:"block",width:"100%",textAlign:"center"},children:("string"==typeof a?a:"")||e.placeholder})}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 rounded",children:a&&a instanceof File?r.jsx("img",{src:URL.createObjectURL(a),alt:"User uploaded",className:"w-full h-full object-contain",style:{objectFit:"contain",width:"100%",height:"100%"},onError:e=>console.error("Error loading uploaded image:",e)}):r.jsx("span",{className:"text-gray-500 text-xs text-center p-1",children:e.placeholder||"Upload Image"})})},e.id)})]}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:r.jsx("span",{className:"text-gray-500",children:"Loading template..."})})})})}),t.isPdf&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("span",{className:"font-medium text-gray-700",children:["Fields on this page: ",getCurrentPagePlaceholders().length]}),(0,r.jsxs)("span",{className:"text-gray-500",children:["Completed: ",getCurrentPagePlaceholders().filter(e=>g[e.id]).length," / ",getCurrentPagePlaceholders().length]})]}),r.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${getCurrentPagePlaceholders().length>0?getCurrentPagePlaceholders().filter(e=>g[e.id]).length/getCurrentPagePlaceholders().length*100:0}%`}})})]})]})})]})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Template not found"}),r.jsx(h(),{href:"/",className:"text-blue-600 hover:text-blue-800",children:"Back to Templates"})]})})}},5438:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>o});var r=a(5153);let s=(0,r.createProxy)(String.raw`C:\Users\prana\CascadeProjects\template-creator\app\customize\[id]\page.tsx`),{__esModule:l,$$typeof:n}=s,i=s.default,o=i}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[862,607,440,590,139,283],()=>__webpack_exec__(9489));module.exports=a})();