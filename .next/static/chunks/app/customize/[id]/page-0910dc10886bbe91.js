(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{5866:function(e,t,a){Promise.resolve().then(a.bind(a,5660))},5660:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return CustomizePage}});var l=a(7437),r=a(2265),s=a(4033),n=a(3067),o=a(6637),i=a(5817),d=a(1291),c=a(7158),g=a(1396),h=a.n(g),m=a(2692),u=a.n(m),x=a(930);function CustomizePage(){let e=(0,s.useParams)(),[t,a]=(0,r.useState)(null),[g,m]=(0,r.useState)({}),[p,f]=(0,r.useState)(!0),[b,y]=(0,r.useState)(!1),[w,P]=(0,r.useState)(0),[j,v]=(0,r.useState)([]),[N,F]=(0,r.useState)(null),[C,k]=(0,r.useState)(null),[D,E]=(0,r.useState)(!1),[T,L]=(0,r.useState)(null),I=(0,r.useRef)(null);(0,r.useEffect)(()=>{let loadPdfLibraries=async()=>{try{let e=document.createElement("script");e.src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js",e.onload=()=>{k(window.PDFLib)},document.head.appendChild(e);let t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",t.onload=()=>{window.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js"},document.head.appendChild(t)}catch(e){console.error("Error loading PDF libraries:",e)}};loadPdfLibraries()},[]),(0,r.useEffect)(()=>{e.id&&fetchTemplate(e.id)},[e.id]),(0,r.useEffect)(()=>{let handleKeyDown=e=>{(null==t?void 0:t.isPdf)&&("ArrowLeft"===e.key||"ArrowUp"===e.key?(e.preventDefault(),navigateToPage("prev")):("ArrowRight"===e.key||"ArrowDown"===e.key)&&(e.preventDefault(),navigateToPage("next")))};return window.addEventListener("keydown",handleKeyDown),()=>window.removeEventListener("keydown",handleKeyDown)},[t,w]);let fetchTemplate=async e=>{try{f(!0);let t=await fetch("/api/templates/".concat(e));if(t.ok){let e=await t.json();a(e);let l={};e.placeholders.forEach(e=>{l[e.id]=""}),m(l),e.isPdf&&e.pdfFilePath?await loadPdfTemplate(e.pdfFilePath):e.isPdf&&!e.pdfFilePath&&(console.warn("PDF template detected but no pdfFilePath provided"),L("PDF file path not found in template data"))}else throw Error("Template not found")}catch(e){console.error("Error fetching template:",e)}finally{f(!1)}},loadPdfTemplate=async e=>{if(!C){console.warn("PDF-lib not loaded yet, retrying..."),setTimeout(()=>loadPdfTemplate(e),1e3);return}try{E(!0),L(null),console.log("Loading PDF from:",e);let l=await fetch(e,{mode:"cors",headers:{Accept:"application/pdf"}});if(!l.ok)throw Error("Failed to fetch PDF: ".concat(l.status," ").concat(l.statusText));let r=await l.arrayBuffer();console.log("PDF loaded, size:",r.byteLength);let s=await C.PDFDocument.load(r),n=s.getPageCount();console.log("PDF pages detected:",n),F(s),t&&(!t.totalPages||t.totalPages!==n)&&a(e=>e?{...e,totalPages:n}:null);let o=[];for(let e=0;e<n;e++)try{console.log("Rendering page ".concat(e+1,"/").concat(n));let t=await renderPdfPage(s,e);t?(o.push(t),console.log("Page ".concat(e+1," rendered successfully"))):(console.warn("Page ".concat(e+1," failed to render")),o.push(""))}catch(t){console.error("Error rendering page ".concat(e+1,":"),t),o.push("")}console.log("Total pages rendered:",o.filter(e=>e).length),v(o),P(0),E(!1)}catch(e){console.error("Error loading PDF template:",e),L("Failed to load PDF template: ".concat(e instanceof Error?e.message:"Unknown error")),E(!1)}},renderPdfPage=async(e,t)=>{if(!C||!e)return"";try{if(window.pdfjsLib||(console.warn("PDF.js not loaded, waiting..."),await new Promise(e=>setTimeout(e,1e3))),window.pdfjsLib){let a=await e.save(),l=window.pdfjsLib.getDocument({data:a,cMapUrl:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/cmaps/",cMapPacked:!0}),r=await l.promise,s=await r.getPage(t+1),n=Math.min(2,800/s.getViewport({scale:1}).width),o=s.getViewport({scale:n}),i=document.createElement("canvas"),d=i.getContext("2d");if(!d)throw Error("Canvas context not available");return i.height=o.height,i.width=o.width,await s.render({canvasContext:d,viewport:o,enableWebGL:!1}).promise,r.destroy(),i.toDataURL("image/png",.9)}{console.warn("PDF.js not available, using fallback");let a=await C.PDFDocument.create(),[l]=await a.copyPages(e,[t]);a.addPage(l);let r=await a.save(),s=new Blob([r],{type:"application/pdf"});return URL.createObjectURL(s)}}catch(e){return console.error("Error rendering PDF page:",e),""}},handleInputChange=(e,t)=>{m(a=>({...a,[e]:t}))},handleImageUpload=(e,t)=>{m(a=>({...a,[e]:t}))},navigateToPage=e=>{if(!t||!t.isPdf)return;let a=t.totalPages||j.length||1;"prev"===e&&w>0?P(w-1):"next"===e&&w<a-1&&P(w+1)},goToPage=e=>{if(!t||!t.isPdf)return;let a=t.totalPages||j.length||1;P(Math.max(0,Math.min(e-1,a-1)))},generatePDF=async()=>{if(t){y(!0);try{t.isPdf&&N?await generatePdfFromTemplate():await generatePdfFromCanvas()}catch(e){console.error("Error generating PDF:",e),alert("Error generating PDF. Please try again.")}finally{y(!1)}}},generatePdfFromTemplate=async()=>{if(C&&N&&t)try{let e=await C.PDFDocument.create(),a=await e.copyPages(N,Array.from({length:N.getPageCount()},(e,t)=>t));a.forEach(t=>e.addPage(t));let l=await e.embedFont(C.StandardFonts.Helvetica),r=await e.embedFont(C.StandardFonts.TimesRoman),s={Arial:l,Helvetica:l,"Times New Roman":r,Georgia:r},n=e.getPages();for(let a=0;a<n.length;a++){let r=n[a],{height:o}=r.getSize(),i=t.placeholders.filter(e=>e.pageIndex===a);for(let n of i){let o=g[n.id];if(!o&&n.required){alert('Required field "'.concat(n.placeholder,'" is missing on page ').concat(a+1));return}if(o){if("text"===n.type){let e=s[n.fontFamily||"Arial"]||l,a=n.fontSize||12,i=hexToRgb(n.color||"#000000"),d=r.getSize(),c=d.width,g=d.height;console.log("[CLIENT DEBUG] Text Placeholder ".concat(n.id,":")),console.log("  Template dimensions: ".concat(t.width,"x").concat(t.height)),console.log("  Actual PDF dimensions: ".concat(c,"x").concat(g)),console.log("  Original position: x=".concat(n.x,", y=").concat(n.y)),console.log("  Original size: w=".concat(n.width,", h=").concat(n.height));let h=n.x,m=g-n.y-n.height;console.log("  Calculated position: x=".concat(h,", y=").concat(m)),console.log("  Font size: ".concat(a)),r.drawText(o.toString(),{x:h,y:m,size:a,font:e,color:C.rgb(i.r/255,i.g/255,i.b/255),maxWidth:n.width})}else if("image"===n.type&&o instanceof File)try{let a;let l=await o.arrayBuffer();if("image/png"===o.type)a=await e.embedPng(l);else if("image/jpeg"===o.type||"image/jpg"===o.type)a=await e.embedJpg(l);else{console.warn("Unsupported image type: ".concat(o.type));continue}let s=r.getSize(),i=s.width,d=s.height;console.log("[CLIENT DEBUG] Image Placeholder ".concat(n.id,":")),console.log("  Template dimensions: ".concat(t.width,"x").concat(t.height)),console.log("  Actual PDF dimensions: ".concat(i,"x").concat(d)),console.log("  Original position: x=".concat(n.x,", y=").concat(n.y)),console.log("  Original size: w=".concat(n.width,", h=").concat(n.height));let c=n.x,g=d-n.y-n.height;console.log("  Calculated position: x=".concat(c,", y=").concat(g)),console.log("  Using original size: w=".concat(n.width,", h=").concat(n.height)),r.drawImage(a,{x:c,y:g,width:n.width,height:n.height})}catch(e){console.error("Error processing image:",e)}}}}let o=await e.save(),i=new Blob([o],{type:"application/pdf"}),d=URL.createObjectURL(i),c=document.createElement("a");c.href=d,c.download="".concat(t.name,"-customized.pdf"),c.click(),URL.revokeObjectURL(d)}catch(e){throw console.error("Error generating PDF from template:",e),e}},generatePdfFromCanvas=async()=>{if(!I.current||!t)return;let e=I.current.querySelectorAll('[data-placeholder-border="true"]');e.forEach(e=>{e.style.border="none",e.style.backgroundColor="transparent"});let a=await u()(I.current,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});e.forEach(e=>{e.style.border="2px dashed #60a5fa",e.style.backgroundColor="rgba(219, 234, 254, 0.3)"});let l=a.toDataURL("image/png"),r=new x.ZP({orientation:t.width>t.height?"landscape":"portrait",unit:"px",format:[t.width,t.height]});r.addImage(l,"PNG",0,0,t.width,t.height),r.save("".concat(t.name,"-customized.pdf"))},downloadImage=async()=>{if(I.current){y(!0);try{let e=I.current.querySelectorAll('[data-placeholder-border="true"]');e.forEach(e=>{e.style.border="none",e.style.backgroundColor="transparent"});let a=await u()(I.current,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});e.forEach(e=>{e.style.border="2px dashed #60a5fa",e.style.backgroundColor="rgba(219, 234, 254, 0.3)"});let l=document.createElement("a");l.download="".concat(null==t?void 0:t.name,"-customized.png"),l.href=a.toDataURL(),l.click()}catch(e){console.error("Error generating image:",e),alert("Error generating image. Please try again.")}finally{y(!1)}}},hexToRgb=e=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}},getCurrentPagePlaceholders=()=>t?t.isPdf?t.placeholders.filter(e=>e.pageIndex===w):t.placeholders:[],getCurrentBackgroundImage=()=>(null==t?void 0:t.isPdf)&&j[w]?j[w]:(null==t?void 0:t.backgroundImage)||"";return p?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Loading template..."})]})}):t?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 text-black",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(h(),{href:"/",className:"mr-4 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full",children:(0,l.jsx)(n.Z,{className:"w-5 h-5"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mr-3",children:t.name}),t.isPdf&&(0,l.jsxs)("div",{className:"flex items-center bg-blue-50 px-2 py-1 rounded-md",children:[(0,l.jsx)(o.Z,{className:"w-4 h-4 text-blue-600 mr-1"}),(0,l.jsx)("span",{className:"text-sm text-blue-600",children:"PDF Template"})]})]}),(0,l.jsx)("p",{className:"text-gray-600",children:t.description}),t.isPdf&&(0,l.jsxs)("p",{className:"text-sm text-blue-600 mt-1",children:[Math.max(t.totalPages||0,j.length)," pages • Current: Page ",w+1]})]})]}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[!t.isPdf&&(0,l.jsxs)("button",{onClick:downloadImage,disabled:b,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50",children:[(0,l.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),b?"Generating...":"Download PNG"]}),(0,l.jsxs)("button",{onClick:generatePDF,disabled:b,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors flex items-center disabled:opacity-50",children:[(0,l.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),b?"Generating...":"Download PDF"]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Customize Your Template"}),t.isPdf&&(j.length>1||t.totalPages&&t.totalPages>1)&&(0,l.jsx)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Navigate Pages"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("button",{onClick:()=>navigateToPage("prev"),disabled:0===w,className:"p-2 rounded bg-white border hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous Page",children:(0,l.jsx)(d.Z,{className:"w-5 h-5"})}),(0,l.jsxs)("span",{className:"text-sm text-gray-600 px-2",children:["Page ",w+1," of ",Math.max(t.totalPages||0,j.length)]}),(0,l.jsx)("button",{onClick:()=>navigateToPage("next"),disabled:w>=Math.max(t.totalPages||0,j.length)-1,className:"p-2 rounded bg-white border hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next Page",children:(0,l.jsx)(c.Z,{className:"w-5 h-5"})})]})]})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h3",{className:"text-md font-medium text-gray-800",children:t.isPdf?"Page ".concat(w+1," Fields"):"Template Fields"}),getCurrentPagePlaceholders().map(e=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.placeholder||"".concat(e.type," field"),e.required&&(0,l.jsx)("span",{className:"text-red-500 ml-1",children:"*"}),t.isPdf&&(0,l.jsxs)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-1 rounded",children:["Page ",(e.pageIndex||0)+1]})]}),"text"===e.type?(0,l.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:e.placeholder,value:g[e.id]||"",onChange:t=>handleInputChange(e.id,t.target.value)}):(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{type:"file",accept:"image/*",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",onChange:t=>{var a;return handleImageUpload(e.id,(null===(a=t.target.files)||void 0===a?void 0:a[0])||null)}}),g[e.id]&&g[e.id]instanceof File&&(0,l.jsxs)("p",{className:"mt-1 text-sm text-green-600",children:["Selected: ",g[e.id].name]})]})]},e.id)),0===getCurrentPagePlaceholders().length&&(0,l.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No fields on this page"})]})]}),t.isPdf&&(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"All Template Fields"}),(0,l.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.placeholders.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm p-2 bg-gray-50 rounded",children:[(0,l.jsx)("span",{className:"font-medium",children:e.placeholder||"".concat(e.type," field")}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-600 px-1 rounded",children:["P",(e.pageIndex||0)+1]}),(0,l.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(g[e.id]?"bg-green-500":"bg-gray-300")})]})]},e.id))})]})]}),(0,l.jsx)("div",{className:"lg:col-span-2",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"Preview"}),t.isPdf&&(j.length>1||t.totalPages&&t.totalPages>1)&&(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("button",{onClick:()=>navigateToPage("prev"),disabled:0===w,className:"p-2 rounded-md bg-blue-100 hover:bg-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous Page",children:(0,l.jsx)(d.Z,{className:"w-5 h-5 text-blue-600"})}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"number",min:"1",max:Math.max(t.totalPages||0,j.length),value:w+1,onChange:e=>goToPage(parseInt(e.target.value)||1),className:"w-16 px-2 py-1 text-sm border border-gray-300 rounded text-center focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,l.jsxs)("span",{className:"text-sm text-gray-600",children:["of ",Math.max(t.totalPages||0,j.length)]})]}),(0,l.jsx)("button",{onClick:()=>navigateToPage("next"),disabled:w>=Math.max(t.totalPages||0,j.length)-1,className:"p-2 rounded-md bg-blue-100 hover:bg-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next Page",children:(0,l.jsx)(c.Z,{className:"w-5 h-5 text-blue-600"})})]})]}),(0,l.jsx)("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white",children:(0,l.jsx)("div",{className:"flex justify-center items-center min-h-[400px] p-4",children:(0,l.jsx)("div",{ref:I,className:"relative shadow-lg",style:{width:t.isPdf?"fit-content":Math.min(t.width||800,800),height:t.isPdf?"fit-content":Math.min(t.height||600,600),maxWidth:"100%",maxHeight:"80vh",backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px"},children:D?(0,l.jsx)("div",{className:"w-full h-96 flex items-center justify-center bg-gray-50",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Loading PDF pages..."})]})}):T?(0,l.jsx)("div",{className:"w-full h-96 flex items-center justify-center bg-red-50",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-red-600 mb-4",children:T}),(0,l.jsx)("button",{onClick:()=>(null==t?void 0:t.pdfFilePath)&&loadPdfTemplate(t.pdfFilePath),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]})}):getCurrentBackgroundImage()?(0,l.jsxs)(l.Fragment,{children:[t.isPdf?getCurrentBackgroundImage()?(0,l.jsx)("img",{src:getCurrentBackgroundImage(),alt:"PDF page ".concat(w+1),className:"w-full h-auto object-contain",crossOrigin:"anonymous",onError:e=>{console.error("Error loading PDF page:",e),L("Failed to load page ".concat(w+1))},onLoad:()=>console.log("PDF page ".concat(w+1," loaded successfully")),style:{display:"block",maxWidth:"100%",maxHeight:"70vh",height:"auto",width:"auto"}}):(0,l.jsx)("div",{className:"w-full h-96 flex items-center justify-center bg-gray-100",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("p",{className:"text-gray-600 mb-2",children:["Page ",w+1," failed to render"]}),(0,l.jsx)("button",{onClick:()=>(null==t?void 0:t.pdfFilePath)&&loadPdfTemplate(t.pdfFilePath),className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Retry"})]})}):(0,l.jsx)("img",{src:getCurrentBackgroundImage(),alt:"Template background",className:"w-full h-full object-contain",crossOrigin:"anonymous",onError:e=>console.error("Error loading image:",e),style:{maxWidth:"100%",maxHeight:"70vh",height:"auto"}}),getCurrentPagePlaceholders().map(e=>{var a,r;let s=g[e.id],n=null===(a=I.current)||void 0===a?void 0:a.querySelector("img"),o=e.x,i=e.y,d=e.width,c=e.height;if(n){let a=n.getBoundingClientRect(),l=null===(r=I.current)||void 0===r?void 0:r.getBoundingClientRect();if(l&&t.width&&t.height){let l=a.width/t.width,r=a.height/t.height;o=e.x*l,i=e.y*r,d=e.width*l,c=e.height*r}}return(0,l.jsx)("div",{className:"absolute flex items-center justify-center print:border-none print:bg-transparent",style:{left:o,top:i,width:d,height:c,pointerEvents:"none",border:"2px dashed #60a5fa",backgroundColor:"rgba(219, 234, 254, 0.3)"},"data-placeholder-border":"true",children:"text"===e.type?(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center text-center break-words overflow-hidden",style:{fontSize:e.fontSize||16,fontFamily:e.fontFamily||"Arial",color:e.color||"#000000",lineHeight:"1.2",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",wordWrap:"break-word",hyphens:"auto"},children:(0,l.jsx)("span",{style:{display:"block",width:"100%",textAlign:"center"},children:("string"==typeof s?s:"")||e.placeholder})}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 rounded",children:s&&s instanceof File?(0,l.jsx)("img",{src:URL.createObjectURL(s),alt:"User uploaded",className:"w-full h-full object-contain",style:{objectFit:"contain",width:"100%",height:"100%"},onError:e=>console.error("Error loading uploaded image:",e)}):(0,l.jsx)("span",{className:"text-gray-500 text-xs text-center p-1",children:e.placeholder||"Upload Image"})})},e.id)})]}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:(0,l.jsx)("span",{className:"text-gray-500",children:"Loading template..."})})})})}),t.isPdf&&(0,l.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsxs)("span",{className:"font-medium text-gray-700",children:["Fields on this page: ",getCurrentPagePlaceholders().length]}),(0,l.jsxs)("span",{className:"text-gray-500",children:["Completed: ",getCurrentPagePlaceholders().filter(e=>g[e.id]).length," / ",getCurrentPagePlaceholders().length]})]}),(0,l.jsx)("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(getCurrentPagePlaceholders().length>0?getCurrentPagePlaceholders().filter(e=>g[e.id]).length/getCurrentPagePlaceholders().length*100:0,"%")}})})]})]})})]})]})}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"Template not found"}),(0,l.jsx)(h(),{href:"/",className:"text-blue-600 hover:text-blue-800",children:"Back to Templates"})]})})}}},function(e){e.O(0,[505,337,221,575,971,472,744],function(){return e(e.s=5866)}),_N_E=e.O()}]);